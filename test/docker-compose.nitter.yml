version: '3.8'

services:
  nitter-redis:
    image: redis:latest

  nitter:
    image: kristobalus/nitter:latest
    platform: "linux/amd64"
    entrypoint: |
      /bin/sh -c '
        cp /config/nitter.conf /src/nitter.conf
        cp /config/guest_accounts.json /src/guest_accounts.json
        ./nitter
      '
    ports:
      - "8080:8080"
    depends_on:
      - nitter-redis
    volumes:
      - ./configs/nitter:/config


